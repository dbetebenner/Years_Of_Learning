<!DOCTYPE html>
<html lang="en"><head>
<link href="../../images/cfa_logo_color.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.340">

  <meta name="author" content="Damian Betebenner">
  <title>Apples by the Bushel, Learning by the Year On the concept of a year‚Äôs worth of learning</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Apples by the Bushel, Learning by the Year On the concept of a year‚Äôs worth of learning">
<meta property="og:site-name" content="Effective Data Visualization with R">
<meta name="twitter:title" content="Apples by the Bushel, Learning by the Year On the concept of a year‚Äôs worth of learning">
<meta name="twitter:creator" content="@dbetebenner">
<meta name="twitter:site" content="@nciea1">
<meta name="twitter:card" content="summary">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="title-slide" class="slide level2 center" data-background="images/apples_by_the_bushel.jpg" data-background-size="cover" data-background-color="#4f6952">
<h2></h2>
</section>
<section id="blurb" class="slide level2">
<h2>Blurb</h2>
<p>Counterfactual Explanations explain how inputs into a model need to change for it to produce different outputs. Explanations that involve realistic and actionable changes can be used for the purpose of Algorithmic Recourse: they offer human stakeholders a principled approach to not only understand the model they are seeking to explain, but also react to it or adjust it.</p>
<p>The general setup lends itself naturally to Bank datasets that revolve around counterparty risk, for example. In this seminar I will introduce the topic and place it into the broader context of Explainable AI. Using my Julia package I will go through a worked example involving a publicly available credit data set. Finally, I will also briefly present some of our recent research that points to potential pitfalls of current state-of-the-art approaches and proposes mitigation strategies.</p>
<p><strong>DISCLAIMER</strong>: Views presented in this presentation are my own.</p>
</section>
<section id="quick-intro" class="slide level2">
<h2>Quick Intro</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Currently 2nd year of PhD in Trustworthy Artificial Intelligence at Delft University of Technology.</li>
<li>Working on Counterfactual Explanations and Probabilistic Machine Learning with applications in Finance.</li>
<li>Previously, educational background in Economics and Finance and two years at the Bank of England (MPAT <span class="math inline">\(\subset\)</span> MIAD).</li>
<li>Enthusiastic about free open-source software, in particular Julia and Quarto.</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img src="images/cfa_logo_color.png" height="auto" width="250" style="border-radius:50%; display: block; margin-left: auto; margin-right: auto;"></p>
<div style="text-align: center;">
<p style="display: inline; vertical-align: middle">
<a href="https://www.linkedin.com/in/patrick-altmeyer-a2a25494/" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/d0fc399dee4218d1e0e0399b8947acab.png" alt="LinkedIn (Personal)" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a> <a href="https://twitter.com/paltmey" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/3949237f892004c237021ac9e3182b1d.png" alt="Twitter" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a> <a href="https://github.com/pat-alt" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/47f4eb2d0082a8a3611d614b75a09db8.png" alt="Github" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a> <a href="https://medium.com/@patrick.altmeyer" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/175f49662614345cb7dbb95fce3f88af.png" alt="Medium" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a>
</p>
</div>
<p><img src="images/cfa_logo_color.png" height="auto" width="100" style="display: block; margin-left: auto; margin-right: auto;"></p>
</div>
</div>
</section>
<section>
<section id="trustworthy-ai" class="title-slide slide level1 center" data-background-image="images/cfa_logo_full_color.png" data-background-color="black">
<h1>Trustworthy AI üîÆ</h1>

</section>
<section id="the-problem-with-todays-ai" class="slide level2">
<h2>The Problem with Today‚Äôs AI</h2>
<blockquote>
<p>From <strong>human</strong> to <strong>data-driven</strong> decision-making ‚Ä¶</p>
</blockquote>
<div>
<ul>
<li class="fragment">Black-box models like deep neural networks are being deployed virtually everywhere.</li>
<li class="fragment">Includes safety-critical and public domains: health care, autonomous driving, finance, ‚Ä¶</li>
<li class="fragment">More likely than not that your loan or employment application is handled by an algorithm.</li>
</ul>
</div>
<div class="fragment">
<blockquote>
<p>‚Ä¶ where black boxes are recipe for disaster.</p>
</blockquote>
<div>
<ul>
<li class="fragment">We have no idea what exactly we‚Äôre cooking up ‚Ä¶
<ul>
<li class="fragment">Have you received an automated rejection email? Why didn‚Äôt you ‚ÄúmEet tHe sHoRtLisTiNg cRiTeRia‚Äù? üôÉ</li>
</ul></li>
<li class="fragment">‚Ä¶ but we do know that some of it is junk.</li>
</ul>
</div>
</div>
<div class="fragment">
<div id="fig-panda" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:50.0%"></p>
<figcaption>Figure&nbsp;1: Adversarial attacks on deep neural networks. Source: <span class="citation" data-cites="goodfellow2014explaining">@goodfellow2014explaining</span></figcaption>
</figure>
</div>
</div>
</section>
<section id="towards-trustworthy-ai" class="slide level2" data-auto-animate="true" data-auto-animate-easing="ease-in-out">
<h2 data-id="quarto-animate-title">Towards Trustworthy AI</h2>
<div class="r-hstack">
<div data-id="box3" style="background: #389826; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center;">
<p>Ground Truthing</p>
</div>
<div data-id="box2" style="background: #cb3c33; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center;">
<p>Probabilistic Models</p>
</div>
<div data-id="box1" style="background: #9558b2; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center;">
<p>Counterfactual Reasoning</p>
</div>
</div>
</section>
<section id="towards-trustworthy-ai-1" class="slide level2" data-auto-animate="true" data-auto-animate-easing="ease-in-out">
<h2 data-id="quarto-animate-title">Towards Trustworthy AI</h2>
<div class="r-hstack" style="text-align: center;">
<div data-id="box3" style="background: #389826; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; opacity: 0.5;">
<p>Ground Truthing</p>
</div>
<div data-id="box2" style="background: #cb3c33; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center;">
<p>Probabilistic Models</p>
</div>
<div data-id="box1" style="background: #9558b2; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; opacity: 0.5;">
<p>Counterfactual Reasoning</p>
</div>
</div>
<h4 id="current-standard-in-ml">Current Standard in ML</h4>
<p>We typically want to maximize the likelihood of observing <span class="math inline">\(\mathcal{D}_n\)</span> under given parameters <span class="citation" data-cites="murphy2022probabilistic">[@murphy2022probabilistic]</span>:</p>
<p><span id="eq-mle"><span class="math display">\[
\theta^* = \arg \max_{\theta} p(\mathcal{D}_n|\theta)
\qquad(1)\]</span></span></p>
<p>Compute an MLE (or MAP) point estimate <span class="math inline">\(\hat\theta = \mathbb{E} \theta^*\)</span> and use <strong>plugin</strong> approximation for prediction:</p>
<p><span id="eq-plugin"><span class="math display">\[
p(y|x,\mathcal{D}_n) \approx p(y|x,\hat\theta)
\qquad(2)\]</span></span></p>
<ul>
<li>In an ideal world we can just use parsimonious and interpretable models like GLM <span class="citation" data-cites="rudin2019stop">[@rudin2019stop]</span>, for which in many cases we can rely on asymptotic properties of <span class="math inline">\(\theta\)</span> to quantify uncertainty.</li>
<li>In practice these models often have performance limitations.</li>
<li>Black-box models like deep neural networks are popular, but they are also the very opposite of parsimonious.</li>
</ul>
<h4 id="objective">Objective</h4>
</section>
<section id="towards-trustworthy-ai-2" class="slide level2" data-auto-animate="true" data-auto-animate-easing="ease-in-out">
<h2 data-id="quarto-animate-title">Towards Trustworthy AI</h2>
<div class="r-hstack" style="text-align: center;">
<div data-id="box3" style="background: #389826; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; opacity: 0.5;">
<p>Ground Truthing</p>
</div>
<div data-id="box2" style="background: #cb3c33; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center;">
<p>Probabilistic Models</p>
</div>
<div data-id="box1" style="background: #9558b2; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; opacity: 0.5;">
<p>Counterfactual Reasoning</p>
</div>
</div>
<h4 id="objective-1">Objective</h4>
<p>. . .</p>
<blockquote>
<p>[‚Ä¶] deep neural networks are typically very underspecified by the available data, and [‚Ä¶] parameters [therefore] correspond to a diverse variety of compelling explanations for the data. <span class="citation" data-cites="wilson2020case">[@wilson2020case]</span></p>
</blockquote>
<p>In this setting it is often crucial to treat models probabilistically!</p>
<p><span id="eq-bma"><span class="math display">\[
p(y|x,\mathcal{D}_n) = \int p(y|x,\theta)p(\theta|\mathcal{D}_n)d\theta
\qquad(3)\]</span></span></p>
</section>
<section id="towards-trustworthy-ai-3" class="slide level2" data-auto-animate="true" data-auto-animate-easing="ease-in-out">
<h2 data-id="quarto-animate-title">Towards Trustworthy AI</h2>
<div class="r-hstack">
<div data-id="box3" style="background: #389826; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; opacity: 0.5;">
<p>Ground Truthing</p>
</div>
<div data-id="box2" style="background: #cb3c33; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; opacity: 0.5;">
<p>Probabilistic Models</p>
</div>
<div data-id="box1" style="background: #9558b2; width: 150px; height: 150px; border-radius: 50%; display: grid; place-content: center; text-align: center; align-items: center;">
<p>Counterfactual Reasoning</p>
</div>
</div>
<blockquote>
<p>We can now make predictions ‚Äì great! But do we know how the predictions are actually being made?</p>
</blockquote>
<div class="fragment">
<h4 id="objective-2">Objective</h4>
<p>With the model trained for its task, we are interested in understanding how its predictions change in response to input changes.</p>
<p><span id="eq-ce-objective"><span class="math display">\[
\nabla_x p(y|x,\mathcal{D}_n;\hat\theta)
\qquad(4)\]</span></span></p>
<div>
<ul>
<li class="fragment">Counterfactual reasoning (in this context) boils down to simple questions: what if <span class="math inline">\(x\)</span> (factual) <span class="math inline">\(\Rightarrow\)</span> <span class="math inline">\(x\prime\)</span> (counterfactual)?</li>
<li class="fragment">By strategically perturbing features and checking the model output, we can (begin to) understand how the model makes its decisions.</li>
<li class="fragment">Counterfactual Explanations always have full fidelity by construction (as opposed to surrogate explanations, for example).</li>
</ul>
</div>
<p>. . .</p>
<blockquote>
<p>Important to realize that we are keeping <span class="math inline">\(\hat\theta\)</span> constant!</p>
</blockquote>
</div>
</section>
<section id="todays-talk" class="slide level2" data-background-color="#ffffff" data-background-size="30%" data-background-position="98% 98%" data-background-image="images/cfa_logo_color.svg">
<h2>Today‚Äôs talk</h2>
<ol type="1">
<li>üîÆ Explaining Black-Box Models through Counterfactuals (<span class="math inline">\(\approx\)</span> 10min)
<ul>
<li>What are they? What are they not?</li>
<li>Counterfactual Explanations in the broader XAI landscape</li>
<li>From Counterfactual Explanations to Algorithmic Recourse</li>
</ul></li>
<li>üõ†Ô∏è Hands-on examples ‚Äî <code>CounterfactualExplanations.jl</code> in Julia (<span class="math inline">\(\approx\)</span> 15min)</li>
<li>üìä Endogenous Macrodynamics in Algorithmic Recourse (<span class="math inline">\(\approx\)</span> 10min)</li>
<li>‚ùì Q&amp;A (<span class="math inline">\(\approx\)</span> 10min)</li>
<li>üöÄ Related Research Topics (<span class="math inline">\(\approx\)</span> 10min)
<ul>
<li>Predictive Uncertainty Quantification</li>
</ul></li>
</ol>
</section></section>
<section>
<section id="explaining-black-box-models-through-counterfactuals" class="title-slide slide level1 center" data-background-image="images/cfa_logo_color.svg">
<h1>Explaining Black-Box Models through Counterfactuals üîÆ</h1>

</section>
<section id="a-framework-for-counterfactual-explanations" class="slide level2">
<h2>A Framework for Counterfactual Explanations</h2>
<blockquote>
<p>Even though [‚Ä¶] interpretability is of great importance and should be pursued, explanations can, in principle, be offered without opening the ‚Äúblack box‚Äù. <span class="citation" data-cites="wachter2017counterfactual">[@wachter2017counterfactual]</span></p>
</blockquote>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="framework">Framework</h4>
<p>. . .</p>
<p>Objective originally proposed by <span class="citation" data-cites="wachter2017counterfactual">@wachter2017counterfactual</span> is as follows</p>
<p><span id="eq-obj"><span class="math display">\[
\min_{x\prime \in \mathcal{X}} h(x\prime) \ \ \ \mbox{s. t.} \ \ \ M(x\prime) = t
\qquad(5)\]</span></span></p>
<p>where <span class="math inline">\(h\)</span> relates to the complexity of the counterfactual and <span class="math inline">\(M\)</span> denotes the classifier.</p>
<p>. . .</p>
<p>Typically this is approximated through regularization:</p>
<p><span id="eq-solution"><span class="math display">\[
x\prime = \arg \min_{x\prime}  \ell(M(x\prime),t) + \lambda h(x\prime)
\qquad(6)\]</span></span></p>
</div><div class="column" style="width:50%;">
<h4 id="intuition">Intuition</h4>
<p>. . .</p>
<div id="fig-cat-mlp" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/juliatrustworthyai/CounterfactualExplanations.jl/main/docs/src/www/recourse_mlp.gif"></p>
<figcaption>Figure&nbsp;2: A cat performing gradient descent in the feature space √† la <span class="citation" data-cites="wachter2017counterfactual">@wachter2017counterfactual</span>.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="counterfactuals-as-in-adversarial-examples" class="slide level2">
<h2>Counterfactuals ‚Ä¶ as in Adversarial Examples?</h2>
<div class="columns">
<div class="column" style="width:25%;">
<blockquote>
<p>Yes and no!</p>
</blockquote>
<p>While both are methodologically very similar, adversarial examples are meant to go undetected while CEs ought to be meaningful.</p>
<p><img data-src="images/cfa_logo_color.png"></p>
</div><div class="column" style="width:75%;">
<h3 id="desiderata">Desiderata</h3>
<div>
<ul>
<li class="fragment"><strong>closeness</strong>: the average distance between factual and counterfactual features should be small (<span class="citation" data-cites="wachter2017counterfactual">@wachter2017counterfactual</span>)</li>
<li class="fragment"><strong>actionability</strong>: the proposed feature perturbation should actually be actionable (<span class="citation" data-cites="ustun2019actionable">@ustun2019actionable</span>, <span class="citation" data-cites="poyiadzi2020face">@poyiadzi2020face</span>)</li>
<li class="fragment"><strong>plausibility</strong>: the counterfactual explanation should be plausible to a human (<span class="citation" data-cites="joshi2019realistic">@joshi2019realistic</span>)</li>
<li class="fragment"><strong>unambiguity</strong>: a human should have no trouble assigning a label to the counterfactual (<span class="citation" data-cites="schut2021generating">@schut2021generating</span>)</li>
<li class="fragment"><strong>sparsity</strong>: the counterfactual explanation should involve as few individual feature changes as possible (<span class="citation" data-cites="schut2021generating">@schut2021generating</span>)</li>
<li class="fragment"><strong>robustness</strong>: the counterfactual explanation should be robust to domain and model shifts (<span class="citation" data-cites="upadhyay2021robust">@upadhyay2021robust</span>)</li>
<li class="fragment"><strong>diversity</strong>: ideally multiple diverse counterfactual explanations should be provided (<span class="citation" data-cites="mothilal2020explaining">@mothilal2020explaining</span>)</li>
<li class="fragment"><strong>causality</strong>: counterfactual explanations reflect the structural causal model underlying the data generating process (<span class="citation" data-cites="karimi2020algorithmic">@karimi2020algorithmic</span>, <span class="citation" data-cites="karimi2021algorithmic">@karimi2021algorithmic</span>)</li>
</ul>
</div>
</div>
</div>
</section>
<section id="counterfactuals-as-in-causal-inference" class="slide level2">
<h2>Counterfactuals ‚Ä¶ as in Causal Inference?</h2>
<blockquote>
<p>NO!</p>
</blockquote>
<div class="columns">
<div class="column" style="width:60%;">
<p><strong>Causal inference</strong>: counterfactuals are thought of as unobserved states of the world that we would like to observe in order to establish causality.</p>
<ul>
<li>The only way to do this is by actually interfering with the state of the world: <span class="math inline">\(p(y|do(x),\theta)\)</span>.</li>
<li>In practice we can only move some individuals to the counterfactual state of the world and compare their outcomes to a control group.</li>
<li>Provided we have controlled for confounders, properly randomized, ‚Ä¶ we can estimate an average treatment effect: <span class="math inline">\(\hat\theta\)</span>.</li>
</ul>
<p><strong>Counterfactual Explanations</strong>: involves perturbing features <strong>after</strong> some model has been trained.</p>
<ul>
<li>We end up comparing <strong>modeled outcomes</strong> <span class="math inline">\(p(y|x,\hat\phi)\)</span> and <span class="math inline">\(p(y|x\prime,\hat\phi)\)</span> for individuals.</li>
<li>We have <strong>not</strong> magically solved causality.</li>
</ul>
</div><div class="column" style="width:40%;">
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
The number of ostensibly pro data scientists confusing themselves into believing that "counterfactual explanations" capture real-world causality is just staggeringü§¶‚Äç‚ôÄÔ∏è. Where do we go from here? How can a community that doesn't even understand what's already known make advances?
</p>
‚Äî Zachary Lipton (@zacharylipton) <a href="https://twitter.com/zacharylipton/status/1538952312781168640?ref_src=twsrc%5Etfw">June 20, 2022</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
</div>
</section>
<section id="from-counterfactual-explanations-to-algorithmic-recourse" class="slide level2">
<h2>From Counterfactual Explanations to Algorithmic Recourse</h2>
<div class="columns">
<div class="column" style="width:40%;">
<blockquote>
<p>‚ÄúYou cannot appeal to (algorithms). They do not listen. Nor do they bend.‚Äù</p>
<p>‚Äî Cathy O‚ÄôNeil in <a href="https://en.wikipedia.org/wiki/Weapons_of_Math_Destruction"><em>Weapons of Math Destruction</em></a>, 2016</p>
</blockquote>
<div id="fig-cathy" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:60.0%"></p>
<figcaption>Figure&nbsp;3: Cathy O‚ÄôNeil. Source: Cathy O‚ÄôNeil a.k.a. <a href="https://mathbabe.org/contact/">mathbabe</a>.</figcaption>
</figure>
</div>
</div><div class="column" style="width:60%;">
<h3 id="algorithmic-recourse">Algorithmic Recourse</h3>
<p>. . .</p>
<ul>
<li><span class="citation" data-cites="oneil2016weapons">@oneil2016weapons</span> points to various real-world involving black-box models and affected individuals facing adverse outcomes.</li>
</ul>
<p>. . .</p>
<ul>
<li>These individuals generally have no way to challenge their outcome.</li>
</ul>
<p>. . .</p>
<blockquote>
<p>Counterfactual Explanations that involve <strong>actionable and realistic</strong> feature perturbations can be used for the purpose of <strong>Algorithmic Recourse</strong>.</p>
</blockquote>
</div>
</div>
</section></section>
<section>
<section id="counterfactualexplanations.jl-in-julia" class="title-slide slide level1 center" data-background-color="#ffffff" data-background-size="15%" data-background-position="95% 95%" data-background-image="images/cfa_logo_color.png">
<h1><a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/stable/"><code>CounterfactualExplanations.jl</code></a> in Julia üõ†Ô∏è</h1>

</section>
<section id="counterfactualexplanations.jl" class="slide level2">
<h2><a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/stable/"><code>CounterfactualExplanations.jl</code></a> üì¶</h2>
<p><a href="https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/stable"><img data-src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"></a> <a href="https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/dev"><img data-src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"></a> <a href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/actions/workflows/CI.yml?query=branch%3Amain"><img data-src="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status"></a> <a href="https://codecov.io/gh/juliatrustworthyai/CounterfactualExplanations.jl"><img data-src="https://codecov.io/gh/juliatrustworthyai/CounterfactualExplanations.jl/branch/main/graph/badge.svg" alt="Coverage"></a> <a href="https://github.com/invenia/BlueStyle"><img data-src="https://img.shields.io/badge/code%20style-blue-4495d1.svg" alt="Code Style: Blue"></a> <a href="https://github.com/SciML/ColPrac"><img data-src="https://img.shields.io/badge/ColPrac-Contributor's%20Guide-blueviolet.png" alt="ColPrac: Contributor‚Äôs Guide on Collaborative Practices for Community Packages"></a></p>
<div class="columns">
<div class="column" style="width:50%;">
<div>
<ul>
<li class="fragment">A unifying framework for generating Counterfactual Explanations.</li>
<li class="fragment">Fast, extensible and composable allowing users and developers to add and combine different counterfactual generators.</li>
<li class="fragment">Implements a number of SOTA generators.</li>
<li class="fragment">Built in Julia, but can be used to explain models built in R and Python (still experimental).</li>
<li class="fragment">Status üîÅ: ready for research, not production. Thought/challenge/contributions welcome!</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_full_color.png" style="width:80.0%"></p>
<figcaption>Photo by <a href="https://unsplash.com/@dmjdenise?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Denise Jans</a> on <a href="https://unsplash.com/s/photos/rubiks-cube?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>.</figcaption>
</figure>
</div>
</div>
</div>
<div class="fragment">
<blockquote>
<p>Julia has an edge with respect to Trustworthy AI: it‚Äôs open-source, uniquely transparent and interoperable üî¥üü¢üü£</p>
</blockquote>
</div>
</section>
<section id="a-simple-example" class="slide level2">
<h2>A simple example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ol type="1">
<li>Load and prepare some toy data.</li>
<li>Select a random sample.</li>
<li>Generate counterfactuals using different approaches.</li>
</ol>
</div><div class="column" style="width:50%;">

</div>
</div>
</section>
<section id="generic-generator" class="slide level2">
<h2>Generic Generator</h2>
<div class="columns">
<div class="column" style="width:40%;">
<h4 id="code">Code</h4>
<p>. . .</p>
<p>We begin by instantiating the fitted model ‚Ä¶</p>
<p>. . .</p>
<p>‚Ä¶ then based on its prediction for <span class="math inline">\(x\)</span> we choose the opposite label as our target ‚Ä¶</p>
<p>. . .</p>
<p>‚Ä¶ and finally generate the counterfactual.</p>
</div><div class="column" style="width:60%;">
<h4 id="output">Output</h4>
<p>. . .</p>
<blockquote>
<p>‚Ä¶ et voil√†!</p>
</blockquote>
</div>
</div>
</section>
<section id="probabilistic-methods-for-counterfactual-explanations" class="slide level2">
<h2>Probabilistic Methods for Counterfactual Explanations</h2>
<p>When people say that counterfactuals should look <strong>realistic</strong> or <strong>plausible</strong>, they really mean that counterfactuals should be generated by the same Data Generating Process (DGP) as the factuals:</p>
<p><span class="math display">\[
x\prime \sim p(x)
\]</span></p>
<p>But how do we estimate <span class="math inline">\(p(x)\)</span>? Two probabilistic approaches ‚Ä¶</p>
<div class="fragment">
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">APPROACH 1: use the model itself</a></li><li><a href="#tabset-1-2">APPROACH 2: use some generative model</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="citation" data-cites="schut2021generating">@schut2021generating</span> note that by maximizing predictive probabilities <span class="math inline">\(\sigma(M(x\prime))\)</span> for <strong>probabilistic</strong> models <span class="math inline">\(M\in\mathcal{\widetilde{M}}\)</span> one implicitly minimizes <strong>epistemic</strong> and <strong>aleotoric</strong> uncertainty.</p>
<p><span id="eq-bayes"><span class="math display">\[
x\prime = \arg \min_{x\prime}  \ell(M(x\prime),t) \ \ \ , \ \ \ M\in\mathcal{\widetilde{M}}
\qquad(7)\]</span></span></p>
</div><div class="column" style="width:50%;">
<div id="fig-cat-laplace" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/juliatrustworthyai/CounterfactualExplanations.jl/main/docs/src/www/recourse_laplace.gif" style="width:70.0%"></p>
<figcaption>Figure&nbsp;4: A cat performing gradient descent in the feature space √† la <span class="citation" data-cites="schut2021generating">@schut2021generating</span></figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="columns">
<div class="column" style="width:50%;">
<p>Instead of perturbing samples directly, some have proposed to instead traverse a lower-dimensional latent embedding learned through a generative model <span class="citation" data-cites="joshi2019realistic">[@joshi2019realistic]</span>.</p>
<p><span id="eq-latent"><span class="math display">\[
z\prime = \arg \min_{z\prime}  \ell(M(dec(z\prime)),t) + \lambda h(x\prime)
\qquad(8)\]</span></span></p>
<p>and</p>
<p><span class="math display">\[x\prime = dec(z\prime)\]</span></p>
<p>where <span class="math inline">\(dec(\cdot)\)</span> is the decoder function.</p>
</div><div class="column" style="width:50%;">
<div id="fig-latent-3d" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:80.0%"></p>
<figcaption>Figure&nbsp;5: Counterfactual (yellow) generated through latent space search (right panel) following <span class="citation" data-cites="joshi2019realistic">@joshi2019realistic</span>. The corresponding counterfactual path in the feature space is shown in the left panel.</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="greedy-generator" class="slide level2">
<h2>Greedy Generator</h2>
<div class="columns">
<div class="column" style="width:40%;">
<h4 id="code-1">Code</h4>
<p>. . .</p>
<p>This time we use a Bayesian classifier ‚Ä¶</p>
<p>. . .</p>
<p>‚Ä¶ and once again choose our target label as before ‚Ä¶</p>
<p>. . .</p>
<p>‚Ä¶ to then finally use greedy search to find a counterfactual.</p>
</div><div class="column" style="width:60%;">
<h4 id="output-1">Output</h4>
<p>. . .</p>
<blockquote>
<p>In this case the Bayesian approach yields a similar outcome.</p>
</blockquote>
</div>
</div>
</section>
<section id="latent-space-generator" class="slide level2">
<h2>Latent Space Generator</h2>
<div class="columns">
<div class="column" style="width:40%;">
<h4 id="code-2">Code</h4>
<p>. . .</p>
<p>Using the same classifier as before we can either use the specific <code>REVISEGenerator</code> ‚Ä¶</p>
<p>. . .</p>
<p>‚Ä¶ or realize that that REVISE <span class="citation" data-cites="joshi2019realistic">[@joshi2019realistic]</span> just boils down to generic search in a latent space:</p>
</div><div class="column" style="width:60%;">
<h4 id="output-2">Output</h4>
<p>. . .</p>
<blockquote>
<p>We have essentially combined latent search with a probabilistic classifier (as in <span class="citation" data-cites="antoran2020getting">@antoran2020getting</span>).</p>
</blockquote>
</div>
</div>
</section>
<section id="diverse-counterfactuals" class="slide level2">
<h2>Diverse Counterfactuals</h2>
<div class="columns">
<div class="column" style="width:40%;">
<h4 id="code-3">Code</h4>
<p>. . .</p>
<p>We can use the <code>DiCEGenerator</code> to produce multiple diverse counterfactuals:</p>
</div><div class="column" style="width:60%;">
<h4 id="output-3">Output</h4>
<p>. . .</p>
</div>
</div>
</section>
<section id="a-real-world-example---credit-default" class="slide level2">
<h2>A Real-World Example - Credit Default</h2>
<ul>
<li>The <strong>Give Me Some Credit</strong> dataset is publicly available from <a href="https://www.kaggle.com/competitions/GiveMeSomeCredit/leaderboard">Kaggle</a>.</li>
</ul>
<blockquote>
<p>Improve on the state of the art in credit scoring by predicting the probability that somebody will experience financial distress in the next two years.</p>
</blockquote>
<ul>
<li>We have <span class="math inline">\(y \in \{0=\text{no stress},1=\text{stress}\}\)</span> and a number of demographic and credit-related features <span class="math inline">\(X\)</span>.</li>
</ul>
</section>
<section id="ignoring-mutability" class="slide level2">
<h2>Ignoring Mutability</h2>
<p>Using <strong>DiCE</strong> to generate counterfactuals for a single individual, ignoring actionability:</p>
</section>
<section id="respecting-mutability" class="slide level2">
<h2>Respecting Mutability</h2>
<p>Using the generic generator to generate counterfactuals for multiple individuals, respecting that <code>age</code> cannot be decreased (you might argue that <code>age</code> also cannot be easily increased ‚Ä¶):</p>
</section></section>
<section>
<section id="endogenous-macrodynamics-in-algorithmic-recourse" class="title-slide slide level1 center" data-background-image="images/cfa_logo_grey.png">
<h1><a href="https://anonymous.4open.science/r/AlgorithmicRecourseDynamics/README.md">Endogenous Macrodynamics in Algorithmic Recourse</a> üìä</h1>

</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<div class="columns">
<div class="column" style="width:60%;">
<blockquote>
<p><strong>TL;DR</strong>: We find that standard implementation of various SOTA approaches to AR can induce substantial domain and model shifts. We argue that these dynamics indicate that individual recourse generates hidden external costs and provide mitigation strategies.</p>
</blockquote>
<p>In this work we investigate what happens if Algorithmic Recourse is actually implemented by a large number of individuals.</p>
<p><a href="#/motivation">Figure&nbsp;6</a> illustrates what we mean by Endogenous Macrodynamics in Algorithmic Recourse:</p>
<ul>
<li>Panel (a): we have a simple linear classifier trained for binary classification where samples from the negative class (y=0) are marked in blue and samples of the positive class (y=1) are marked in orange</li>
<li>Panel (b): the implementation of AR for a random subset of individuals leads to a noticable domain shift</li>
<li>Panel (c): as the classifier is retrained we observe a corresponding model shift <span class="citation" data-cites="upadhyay2021robust">[@upadhyay2021robust]</span></li>
<li>Panel (d): as this process is repeated, the decision boundary moves away from the target class.</li>
</ul>
</div><div class="column" style="width:40%;">
<div id="fig-poc" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:70.0%"></p>
<figcaption>Figure&nbsp;6: Proof of concept: repeated implementation of AR leads to domain and model shifts.</figcaption>
</figure>
</div>
<blockquote>
<p>We argue that these shifts should be considered as an expected external cost of individual recourse and call for a paradigm shift from individual to collective recourse in these types of situations.</p>
</blockquote>
</div>
</div>
</section>
<section id="generalised-framework" class="slide level2">
<h2>Generalised Framework</h2>
<h4 id="from-individual-recourse">From individual recourse ‚Ä¶</h4>
<p>We restate <a href="#/a-framework-for-counterfactual-explanations">Equation&nbsp;6</a> to encapsulate latent space search:</p>
<p><span id="eq-general"><span class="math display">\[
\begin{aligned}
\mathbf{s}^\prime &amp;= \arg \min_{\mathbf{s}^\prime \in \mathcal{S}} \left\{  {\text{yloss}(M(f(\mathbf{s}^\prime)),y^*)}+ \lambda {\text{cost}(f(\mathbf{s}^\prime)) }  \right\}
\end{aligned}
\qquad(9)\]</span></span></p>
<h4 id="towards-collective-recourse">‚Ä¶ towards collective recourse</h4>
<p>We borrow the notion of <strong>negative externalities</strong> from Economics, to formalise the idea that individual recourse fails to account for external costs:</p>
<p><span id="eq-collective"><span class="math display">\[
\begin{aligned}
\mathbf{s}^\prime &amp;= \arg \min_{\mathbf{s}^\prime \in \mathcal{S}} \{ {\text{yloss}(M(f(\mathbf{s}^\prime)),y^*)} \\ &amp;+ \lambda_1 {\text{cost}(f(\mathbf{s}^\prime))} + \lambda_2 {\text{extcost}(f(\mathbf{s}^\prime))} \}
\end{aligned}
\qquad(10)\]</span></span></p>
</section>
<section id="findings" class="slide level2">
<h2>Findings</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:70.0%"></p>
<figcaption>Results for synthetic data.</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_grey.png" style="width:70.0%"></p>
<figcaption>Results for real-word data.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mitigation-strategies" class="slide level2">
<h2>Mitigation Strategies</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ol type="1">
<li>Choose more conservative decision thresholds.</li>
<li>Classifer Preserving ROAR (ClaPROAR): penalise classifier loss.</li>
</ol>
<p><span id="eq-clap"><span class="math display">\[
\begin{aligned}
\text{extcost}(f(\mathbf{s}^\prime)) = l(M(f(\mathbf{s}^\prime)),y^\prime)
\end{aligned}
\qquad(11)\]</span></span></p>
<ol start="3" type="1">
<li>Gravitational Counterfactual Explanations: penalise distance to some sensible point in the target domain.</li>
</ol>
<p><span id="eq-grav"><span class="math display">\[
\begin{aligned}
\text{extcost}(f(\mathbf{s}^\prime)) = \text{dist}(f(\mathbf{s}^\prime),\bar{x})  
\end{aligned}
\qquad(12)\]</span></span></p>
</div><div class="column" style="width:50%;">
<div id="fig-mit" class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png"></p>
<figcaption>Figure&nbsp;7: Illustrative example demonstrating the properties of the various mitigation strategies. Samples from the negative class <span class="math inline">\((y = 0)\)</span> are marked in blue while samples of the positive class <span class="math inline">\((y = 1)\)</span> are marked in orange.</figcaption>
</figure>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:50.0%"></p>
<figcaption>Mitigation strategies applied to synthetic data.</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png" style="width:50.0%"></p>
<figcaption>Mitigation strategies applied to real-world data.</figcaption>
</figure>
</div>
</div>
</div>
</section></section>
<section id="questions-answers" class="title-slide slide level1 center" data-background-color="#ffffff" data-background-size="20%" data-background-position="98% 98%" data-background-image="images/cfa_logo_color.svg">
<h1>Questions &amp; Answers ‚ùì</h1>

</section>

<section>
<section id="related-research-topics" class="title-slide slide level1 center" data-background-image="images/cfa_logo_color.png">
<h1>Related Research Topics üéØ</h1>

</section>
<section id="effortless-bayesian-deep-learning-through-laplace-redux" class="slide level2">
<h2><a href="https://pretalx.com/juliacon-2022/talk/Z7MXFS/">Effortless Bayesian Deep Learning through Laplace Redux</a></h2>
<p><a href="https://juliatrustworthyai.github.io/LaplaceRedux.jl/stable"><img data-src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"></a> <a href="https://juliatrustworthyai.github.io/LaplaceRedux.jl/dev"><img data-src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"></a> <a href="https://github.com/juliatrustworthyai/LaplaceRedux.jl/actions/workflows/CI.yml?query=branch%3Amain"><img data-src="https://github.com/juliatrustworthyai/LaplaceRedux.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status"></a> <a href="https://codecov.io/gh/juliatrustworthyai/LaplaceRedux.jl"><img data-src="https://codecov.io/gh/juliatrustworthyai/LaplaceRedux.jl/branch/main/graph/badge.svg" alt="Coverage"></a></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><code>LaplaceRedux.jl</code> (formerly <code>BayesLaplace.jl</code>) is a small package that can be used for effortless Bayesian Deep Learning and Logistic Regression trough Laplace Approximation. It is inspired by this Python <a href="https://aleximmer.github.io/Laplace/index.html#setup">library</a> and its companion <a href="https://arxiv.org/abs/2106.14806">paper</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/cfa_logo_color.png"></p>
<figcaption>Plugin Approximation (left) and Laplace Posterior (right) for simple artificial neural network.</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/juliatrustworthyai/LaplaceRedux.jl/main/dev/resources/juliacon22/www/intro.gif" style="width:70.0%"></p>
<figcaption>Simulation of changing posteriour predictive distribution. Image by author.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="conformalprediction.jl" class="slide level2">
<h2><a href="https://github.com/juliatrustworthyai/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a></h2>
<p><a href="https://juliatrustworthyai.github.io/ConformalPrediction.jl/stable/"><img data-src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"></a> <a href="https://juliatrustworthyai.github.io/ConformalPrediction.jl/dev/"><img data-src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"></a> <a href="https://github.com/juliatrustworthyai/ConformalPrediction.jl/actions/workflows/CI.yml?query=branch%3Amain"><img data-src="https://github.com/juliatrustworthyai/ConformalPrediction.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status"></a> <a href="https://codecov.io/gh/juliatrustworthyai/ConformalPrediction.jl"><img data-src="https://codecov.io/gh/juliatrustworthyai/ConformalPrediction.jl/branch/main/graph/badge.svg" alt="Coverage"></a> <a href="https://github.com/invenia/BlueStyle"><img data-src="https://img.shields.io/badge/code%20style-blue-4495d1.svg" alt="Code Style: Blue"></a> <a href="https://github.com/SciML/ColPrac"><img data-src="https://img.shields.io/badge/ColPrac-Contributor's%20Guide-blueviolet.png" alt="ColPrac: Contributor‚Äôs Guide on Collaborative Practices for Community Packages"></a> <a href="https://twitter.com/paltmey"><img data-src="https://img.shields.io/twitter/url/https/twitter.com/paltmey.svg?style=social&amp;label=Follow%20%40paltmey" alt="Twitter Badge"></a></p>
<p><code>ConformalPrediction.jl</code> is a package for Uncertainty Quantification (UQ) through Conformal Prediction (CP) in Julia. It is designed to work with supervised models trained in <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/">MLJ</a> <span class="citation" data-cites="blaom2020mlj">[@blaom2020mlj]</span>. Conformal Prediction is distribution-free, easy-to-understand, easy-to-use and model-agnostic.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/pat-alt/blog/main/posts/conformal-prediction/www/medium.gif"></p>
<figcaption>Conformal Prediction in action: Prediction sets for two different samples and changing coverage rates. As coverage grows, so does the size of the prediction sets.</figcaption>
</figure>
</div>
</section>
<section id="more-resources" class="slide level2">
<h2>More Resources üìö</h2>
<div class="columns">
<div class="column" style="width:60%;">
<blockquote>
<p>Read on ‚Ä¶</p>
</blockquote>
<ul>
<li>Blog post introducing CE: [<a href="https://towardsdatascience.com/individual-recourse-for-black-box-models-5e9ed1e4b4cc">TDS</a>], [<a href="https://www.paltmeyer.com/blog/posts/individual-recourse-for-black-box-models/">blog</a>].</li>
<li>Blog post on Laplace Redux: [<a href="https://towardsdatascience.com/go-deep-but-also-go-bayesian-ab25efa6f7b">TDS</a>], [<a href="https://www.paltmeyer.com/blog/posts/effortsless-bayesian-dl/">blog</a>].</li>
<li>Blog post on Conformal Prediction: [<a href="https://towardsdatascience.com/conformal-prediction-in-julia-351b81309e30">TDS</a>], [<a href="https://www.paltmeyer.com/blog/posts/conformal-prediction/">blog</a>].</li>
</ul>
<blockquote>
<p>‚Ä¶ or get involved! ü§ó</p>
</blockquote>
<ul>
<li><a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/dev/contributing/">Contributor‚Äôs Guide</a> for <code>CounterfactualExplanations.jl</code></li>
<li><a href="file:///Users/FA31DU/code/ConformalPrediction.jl/docs/build/contribute.html">Contributor‚Äôs Guide</a> for <code>ConformalPrediction.jl</code></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img src="images/cfa_logo_color.png" height="auto" width="250" style="border-radius:50%; display: block; margin-left: auto; margin-right: auto;"></p>
<div style="text-align: center;">
<p style="display: inline; vertical-align: middle">
<a href="https://www.linkedin.com/in/patrick-altmeyer-a2a25494/" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/d0fc399dee4218d1e0e0399b8947acab.png" alt="LinkedIn (Personal)" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a> <a href="https://twitter.com/paltmey" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/3949237f892004c237021ac9e3182b1d.png" alt="Twitter" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a> <a href="https://github.com/pat-alt" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/47f4eb2d0082a8a3611d614b75a09db8.png" alt="Github" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a> <a href="https://medium.com/@patrick.altmeyer" style="display: inline-block; color: rgb(207, 142, 255) !important;"> <font style=""> <img width="60" height="60" src="https://s1g.s3.amazonaws.com/175f49662614345cb7dbb95fce3f88af.png" alt="Medium" style="border: none; max-width: 100%; height: 60px !important;"> </font> </a>
</p>
</div>
<p><img src="images/cfa_logo_color.png" height="auto" width="100" style="display: block; margin-left: auto; margin-right: auto;"></p>
</div>
</div>

<p><img src="images/cfa_logo_full_color.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>